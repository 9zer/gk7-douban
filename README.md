#豆瓣阅读推送至kindle，chrome插件及服务端#

##使用说明
```
sudo pip install web.py
```


##实现逻辑
1. 客户端读取豆瓣阅读具体文章内容
  + 豆瓣内容存储在localStore中(使用豆瓣自定义加密)
  + 获取文章加密内容使用豆瓣加密js解密，然后使用base64编码
2. 客户端使用post请求至服务器
3. 服务器接收请求，使用base64解密，获取json数据
4. 根据kindle html规法生成html文件
5. 将待转换的数据信息存储在表中
6. 将待发送的邮件信息存储在表中

7. 开启异步进程，转换书籍并发送邮件
8. 返回状态

**7和8: 并行**

##待优化
+ 文件路径规范
+ 豆瓣文章ID存储
+ 客户端并发控制
+ HTTP传输数据大太，导致处理比较慢[传输数据压缩；nginx处理]
+ 客户端邮件设置优化

##Change log
+ 推送至email先存储在sqlite表中，例如定时巡检发送邮件
+ 图书信息存储在sqlite中
+ 格式转换使用calibre中的`ebook-convert`命令
+ 使用python subprocess模块调用系统命令
+ 书籍转换和邮件发送 变为异步进程调用
+ 书籍转换时添加作者信息

###v2.2
+ 客户端HTTP传输数据删除Base64加密，替换为douban自身的加密数据
+ 服务端添加解析douban阅读文章数据算法
+ 添加切面打印调用函数日志，日志时间格式添加毫秒
+ 客户端超时时间设置为30s
+ 客户端等待优化，使用`pace`进度条
